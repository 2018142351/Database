DELIMITER$$
DROP PROCEDURE DO_UPDATE;
CREATE PROCEDURE DO_UPDATE(IN xh char(6),IN KCM CHAR(16))
BEGIN
	DECLARE KCH CHAR(3);
	DECLARE CJ TINYINT;
	SELECT 课程号 INTO KCH FROM KCB WHERE 课程名=KCM;
	SELECT 成绩 INTO CJ FROM CJB WHERE 学号 =xh AND 课程号=KCH;
	IF CJ<60 THEN
		UPDATE XSB SET 备注='有课程没过' WHERE 学号=XH;
	ELSE
		UPDATE CJB SET 成绩=60 WHERE 学号=xh AND 课程号=KCH;
	END IF;
END $$
DELIMITER;